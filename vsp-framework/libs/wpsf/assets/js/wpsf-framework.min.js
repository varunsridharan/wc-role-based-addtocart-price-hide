!function($,window,document,wp_hooks,undefined){"use strict";var WPSF_Modal_Search;WPSF_Modal_Search=window.Backbone.View.extend({overlay:!1,isonGoing:!1,ajaxTimer:!1,Cdata:{},open:function(){return this.$response.html(""),this.$el.show(),this.$overlay.show(),this.send()},send:function(){wp_hooks.doAction("wpsf_modal_search_ajax_start",this);var $this=this;!1!==this.isonGoing&&this.isonGoing.abort();var settings_id,search;(search=this).$spinner.show(),settings_id=$(".modal-"+this.modal_id).data("settingsid");var settings={};return"object"==typeof window[settings_id]&&(settings=window[settings_id]),$.ajax(ajaxurl,{type:"POST",dataType:"json",data:{search:search.$input.val(),selected:JSON.parse($this.parentElem.find(".modal_search_value textarea").val()),data:settings,action:"wpsf-ajax","wpsf-action":settings.ajax}}).always(function(){wp_hooks.doAction("wpsf_modal_search_ajax_end",search),search.$spinner.hide(),$this.isonGoing=!1}).done(function(response){var data;response.success||search.$response.text("Error"),data=response.data,"checkbox"===search.selectType&&(data=data.replace(/type="radio"/gi,'type="checkbox"')),search.$response.html(data)}).fail(function(){}),!0},close:function(){return this.$overlay.hide(),this.$el.hide()},escClose:function(evt){if(evt.which&&27===evt.which)return this.close();this.maybeStartSearch(evt)},maybeStartSearch:function(evt){return!1!==this.isonGoing&&(this.isonGoing.abort(),this.isonGoing=!1),this.send()},selectPost:function(evt){return this,this.selector,evt.preventDefault(),this.parentElem.find(".modal_search_value textarea").html(JSON.stringify(this.Cdata)),$.WPSF_HELPER.MODEL_SEARCH_RESUT(this.parentElem,this.Cdata),this.close()},handleDelete:function(evt){var $id=$(evt.target).data("id");void 0!==this.Cdata[$id]&&delete this.Cdata[$id],$("#wpsf-modal-search-view-response .wpsfModalInput[value='"+$id+"']").prop("checked",!1),this.handleSelectedPost(null)},handleSelectedPost:function(evt){if(null!==evt){var $elem=$(evt.target);!0===$elem.is(":checked")?this.Cdata[$elem.val()]=$elem.data("label"):delete this.Cdata[$elem.val()]}var $HML=$.WPSF_HELPER.MODAL_SEARCH_RESULT_HTML(this.Cdata);this.$el.find(".wpsf-modal-search-result").html($HML),this.parentElem.find(".modal_search_value textarea").html(JSON.stringify(this.Cdata)),this.parentElem.find(".wpsf-modal-search-result").html($HML)},events:function(){return{"blur #wpsf-modal-search-view-input":"maybeStartSearch","click #wpsf-modal-search-view-submit":"selectPost","click #wpsf-modal-search-view-search":"send","click input.wpsfModalInput":"handleSelectedPost","click #wpsf-modal-search-view-close":"close","click .wpsf-modal-search-result span.close":"handleDelete"}},initialize:function(pars){if(this.$el=$(this.el),this.selector=pars.selector,this.modal_id=pars.modal_id,this.parentElem=pars.parentElem,this.Cdata=JSON.parse(this.parentElem.find(".modal_search_value textarea").html()),this.handleSelectedPost(null),this.$response=this.$el.find("#wpsf-modal-search-view-response"),this.$input=this.$el.find("#wpsf-modal-search-view-input"),this.$spinner=this.$el.find(".spinner"),this.listenTo(this,"open",this.open),this.listenTo(this,"close",this.close),this.$overlay=$("#"+this.modal_id+"-overlay"),!this.$overlay.length)return $("body").append('<div id="'+this.modal_id+'-overlay" class="ui-find-overlay"></div>'),this.$overlay=$("#"+this.modal_id+"-overlay")}}),$.WPSF_HELPER={COLOR_PICKER:{parse:function($value){var val=$value.replace(/\s+/g,""),alpha=-1!==val.indexOf("rgba")?parseFloat(100*val.replace(/^.*,(.+)\)/,"$1")):100;return{value:val,alpha:alpha,rgba:alpha<100}}},CSS_BUILDER:{validate:function(val){var s=val;if($.isNumeric(val))return val+"px";if(val.indexOf("px")>-1||val.indexOf("%")>-1||val.indexOf("em")>-1){var checkPx=s.replace("px",""),checkPct=s.replace("%",""),checkEm=s.replace("em","");return $.isNumeric(checkPx)||$.isNumeric(checkPct)||$.isNumeric(checkEm)?val:"0px"}return"0px"},update:{border:function($el){$el.find(".wpsf-css-builder-border").css({"border-top-left-radius":$el.find(".wpsf-border-radius-top-left :input").val(),"border-top-right-radius":$el.find(".wpsf-border-radius-top-right :input").val(),"border-bottom-right-radius":$el.find(".wpsf-border-radius-bottom-left :input").val(),"border-bottom-left-radius":$el.find(".wpsf-border-radius-bottom-right :input").val(),"border-style":$el.find(".wpsf-element-border-style select").val(),"border-color":$el.find(".wpsf-element-border-color input.wpsf-field-color-picker").val()}),$el.find(".wpsf-css-builder-margin").css({"background-color":$el.find(".wpsf-element-background-color input.wpsf-field-color-picker").val(),color:$el.find(".wpsf-element-text-color input.wpsf-field-color-picker").val()})},all:function($el,$type,$main){var $newVal=$el.val(),$val=$.WPSF_HELPER.CSS_BUILDER.validate($newVal);!0===$(".wpsf-"+$type+"-checkall").hasClass("checked")?$main.find(".wpsf-element.wpsf-"+$type+" :input").val($val):$el.val($val),$.WPSF_HELPER.CSS_BUILDER.update.border($main)}}},LIMITER:{counter:function(val,countBy){return""==$.trim(val)?0:countBy?val.match(/\S+/g).length:val.length},subStr:function(val,start,len,subByWord){if(!subByWord)return val.substr(start,len);var lastIndexSpace=val.lastIndexOf(" ");return val.substr(start,lastIndexSpace)}},FONT_CONTAINER:{font_style:function($fontWeightStyle){var $weight_val="400",$style_val="normal";switch($fontWeightStyle){case"100":$weight_val="100";break;case"100italic":$weight_val="100",$style_val="italic";break;case"300":$weight_val="300";break;case"300italic":$weight_val="300",$style_val="italic";break;case"500":$weight_val="500";break;case"500italic":$weight_val="500",$style_val="italic";break;case"700":$weight_val="700";break;case"700italic":$weight_val="700",$style_val="italic";break;case"900":$weight_val="900";break;case"900italic":$weight_val="900",$style_val="italic";break;case"italic":$style_val="italic"}return{weight:$weight_val,style:$style_val}},update:function($el){var $parentName=$el.find(".wpsf_font_field").attr("data-id"),$font_field=$el.find(".wpsf-element-font-family"),$preview=$el.find(".wpsf-font-preview"),$tag=$el.find(".wpsf-element-tag select").val(),$color=$el.find(".wpsf-field-color_picker input.wp-color-picker").val(),$font=$font_field.find(".wpsf-typo-family").val(),$fontWeightStyle=$font_field.find(".wpsf-typo-variant > :selected").text(),$align=$el.find(".wpsf-element-text-align select").val(),$fontSize=$el.find(".wpsf-element-font-size input").val(),$lineHeight=$el.find(".wpsf-element-line-height input").val(),$letterSpacing=$el.find(".wpsf-element-letter-spacing input").val(),$font_style=$.WPSF_HELPER.FONT_CONTAINER.font_style($fontWeightStyle),href="http://fonts.googleapis.com/css?family="+$font+":"+$font_style.weight,html='<link href="'+href+'" class="wpsf-font-preview-'+$parentName+'" rel="stylesheet" type="text/css" />';jQuery(".wpsf-font-preview-"+$parentName).length>0?jQuery(".wpsf-font-preview-"+$parentName).attr("href",href):jQuery("head").append(html),""!==$fontSize&&void 0!==$fontSize||($fontSize="18px"),""!==$letterSpacing&&void 0!==$letterSpacing||($letterSpacing="1px"),""!==$lineHeight&&void 0!==$lineHeight||($lineHeight="20px");var $attrs=" font-family:"+$font+";  font-weight:"+$font_style.weight+";  font-style:"+$font_style.style+";  text-align:"+$align+";  color: "+$color+"; font-size:"+$.WPSF_HELPER.CSS_BUILDER.validate($fontSize)+";  letter-spacing:"+$.WPSF_HELPER.CSS_BUILDER.validate($letterSpacing)+";  line-height:"+$.WPSF_HELPER.CSS_BUILDER.validate($lineHeight)+"; ",$text=$preview.text();$preview.html(""),$preview.append($("<"+$tag+">"+$text+"</"+$tag+">")),$preview.find($tag).attr("style",$attrs)}},NAV_BAR:{modern:function($el,$single_page){var $this=$el,$nav=$this.find(".wpsf-nav"),$reset=$this.find(".wpsf-reset"),$reset_parent=$this.find(".wpsf_parent_section_id"),$expand=$this.find(".wpsf-expand-all");$nav.find("ul:first a").on("click",function(e){e.preventDefault();var $el=$(this),$next=$el.next(),$target=$el.data("section"),$parent=$el.data("parent-section");if($next.is("ul"))$next.slideToggle("fast"),$el.closest("li").toggleClass("wpsf-tab-active");else if("yes"===$single_page){$is_parent="";if($parent)var $is_parent=$parent+"-";$this.find("#wpsf-tab-"+$is_parent+$target).show().siblings().hide(),$nav.find("a").removeClass("wpsf-section-active"),$el.addClass("wpsf-section-active"),$reset.val($target),$reset_parent.val($parent)}else window.location.href=$el.attr("href");$("body").trigger("wpsf_settings_nav_updated",[$parent,$target,$el])}),$expand.on("click",function(e){e.preventDefault(),$this.find(".wpsf-body").toggleClass("wpsf-show-all"),$(this).find(".fa").toggleClass("fa-eye-slash").toggleClass("fa-eye")})},simple:function($el,$single_page){var $this=$el,$main_nav=$this.find(".wpsf-main-nav"),$sub_nav=$this.find(".wpsf-subnav-container"),$reset_parent=$this.find(".wpsf_parent_section_id"),$reset=$this.find(".wpsf-reset");if($main_nav.find("a").on("click",function(e){e.preventDefault();var $el=$(this),$target=$el.data("section"),$parent=$el.data("parent-section");if("yes"===$single_page){var $cdiv=$this.find("#wpsf-tab-"+$target);$cdiv.show().siblings().hide(),$main_nav.find("a").removeClass("nav-tab-active"),$el.addClass("nav-tab-active"),$reset.val($target);$parent=$cdiv.find("#wpsf-tab-"+$target+" a.current").data("section");$reset_parent.val($parent)}else window.location.href=$el.attr("href");$("body").trigger("wpsf_settings_nav_updated",[$target,$parent,$el])}),$sub_nav.find(".wpsf-submenus a").on("click",function(e){e.preventDefault();var $el=$(this),$target=$el.data("section"),$parent=$el.data("parent-section");$this.find("#wpsf-tab-"+$parent+"-"+$target).show().siblings().hide(),$sub_nav.find("#wpsf-tab-"+$parent+" a").removeClass("current"),$el.addClass("current"),$reset.val($target),$reset_parent.val($parent),$("body").trigger("wpsf_settings_nav_updated",[$parent,$target,$el])}),"no"===$single_page){var $parent=$main_nav.find("a.nav-tab-active").data("section"),$section=$sub_nav.find("a.current").attr("data-section");$reset_parent.val($parent),$reset.val($section)}}},DEP_ELEM:function($elem,$is_sub){var $return=null;switch($elem){case"page_template":$return="select#page_template";break;case"menu_order":$return="input#menu_order";break;case"parent_id":$return="select#parent_id";break;case"post_status":$return="select#post_status";break;case"visibility":$return="input[name=visibility]";break;case"post_format":$return="input[name=post_format]"}return null!==$return?$return:!0===$is_sub?'[data-sub-depend-id="'+$elem+'"]':'[data-depend-id="'+$elem+'"]'},ELM_ARGS:function(elem,$options){var $final_data={};return $.each($options,function(key,defaults){var $data=elem.data(key);$final_data[key]=void 0===$data?defaults:$data}),$final_data},ELM_ARGS_TYPE:function($args){return $.each($args,function($code,$value){"1"==$value?$args[$code]=!0:"0"==$value&&($args[$code]=!1)}),$args},MODAL_SEARCH_RESULT_HTML:function($result){var $HTML="<ul>";return"object"==typeof $result&&$.each($result,function($Key,$values){$HTML+='<li> <span class="id">#'+$Key+'</span><span class="label">'+$values+"</span> ",$HTML+='<span data-id="'+$Key+'" class="dashicons dashicons-no-alt close"></span>',$HTML+="</li>"}),$HTML+="</ul>"},MODEL_SEARCH_RESUT:function($parentEleme,$result){$parentEleme.find(".wpsf-modal-search-result").html($.WPSF_HELPER.MODAL_SEARCH_RESULT_HTML($result)),$parentEleme.find(".wpsf-modal-search-result span.close").on("click",function(){var $JSON=JSON.parse($parentEleme.find(".modal_search_value textarea").html()),$clicked=$(this).data("id"),$h=$(this);void 0!==$JSON[$clicked]&&(delete $JSON[$clicked],$h.parent().fadeOut("fast",function(){$(this).remove()})),$parentEleme.find(".modal_search_value textarea").html(JSON.stringify($JSON))})}},$.WPSF_DEPENDENCY=function(el,param){var base=this;base.$el=$(el),base.el=el,base.init=function(){base.ruleset=$.deps.createRuleset();var cfg={show:function(el){el.removeClass("hidden")},hide:function(el){el.addClass("hidden")},log:!1,checkTargets:!1};void 0!==param?base.depSub():base.depRoot(),$.deps.enable(base.$el,base.ruleset,cfg)},base.depRoot=function(){base.$el.each(function(){$(this).find("[data-controller]").each(function(){var $this=$(this),_controller=$this.data("controller").split("|"),_condition=$this.data("condition").split("|"),_value=$this.data("value").toString().split("|"),_rules=base.ruleset;$.each(_controller,function(index,element){var value=_value[index]||"",condition=_condition[index]||_condition[0];(_rules=_rules.createRule($.WPSF_HELPER.DEP_ELEM(element,!1),condition,value)).include($this)})})})},base.depSub=function(){base.$el.each(function(){$(this).find("[data-sub-controller]").each(function(){var $this=$(this),_controller=$this.data("sub-controller").split("|"),_condition=$this.data("sub-condition").split("|"),_value=$this.data("sub-value").toString().split("|"),_rules=base.ruleset;$.each(_controller,function(index,element){var value=_value[index]||"",condition=_condition[index]||_condition[0];(_rules=_rules.createRule($.WPSF_HELPER.DEP_ELEM(element,!0),condition,value)).include($this)})})})},base.init()},$.fn.WPSF_CHOSEN=function(){return this.each(function(){$(this).chosen({allow_single_deselect:!0,disable_search_threshold:15,width:parseFloat($(this).actual("width")+25)+"px"})})},$.fn.WPSF_SELECT2=function(){return this.each(function(){var $settings={};if("yes"===$(this).attr("data-has-settings")){var $parent=$(this).parent(),$request_param=JSON.parse($parent.find(".wpsf-element-settings").html());$settings={ajax:{cache:!0,url:ajaxurl,dataType:"json",data:function($term){return $request_param.s=$term.term,$request_param},method:"post",processResults:function(data,params){var terms=[];return data&&jQuery.each(data,function(id,text){terms.push({id:id,text:text})}),{results:terms}}}}}!0===$.WPSF.is_in_popup&&($settings.dropdownParent=$("#wpsf-shortcode-dialog")),$(this).select2($settings)})},$.fn.WPSF_IMAGE_SELECT=function(){return this.each(function(){$(this).find("label").on("click",function(){$(this).siblings().find("input").prop("checked",!1)})})},$.fn.WPSF_SORTER=function(){return this.each(function(){var $this=$(this),$enabled=$this.find(".wpsf-enabled"),$disabled=$this.find(".wpsf-disabled");$enabled.sortable({connectWith:$disabled,placeholder:"ui-sortable-placeholder",update:function(event,ui){var $el=ui.item.find("input");ui.item.parent().hasClass("wpsf-enabled")?$el.attr("name",$el.attr("name").replace("disabled","enabled")):$el.attr("name",$el.attr("name").replace("enabled","disabled")),$this.trigger("wpsf-sorter-updated")}}),$disabled.sortable({connectWith:$enabled,placeholder:"ui-sortable-placeholder"})})},$.fn.WPSF_UPLOADER=function(){return this.each(function(){var wp_media_frame,$this=$(this),$add=$this.find(".wpsf-add"),$input=$this.find("input");$add.on("click",function(e){e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&(wp_media_frame?wp_media_frame.open():((wp_media_frame=wp.media({title:$add.data("frame-title"),library:{type:$add.data("upload-type")},button:{text:$add.data("insert-title")}})).on("select",function(){var attachment=wp_media_frame.state().get("selection").first();$input.val(attachment.attributes.url).trigger("change")}),wp_media_frame.open()))})})},$.fn.WPSF_IMAGE_UPLOADER=function(){return this.each(function(){var wp_media_frame,$this=$(this),$add=$this.find(".wpsf-add"),$preview=$this.find(".wpsf-image-preview"),$remove=$this.find(".wpsf-remove"),$input=$this.find("input"),$img=$this.find("img");$add.on("click",function(e){e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&(wp_media_frame?wp_media_frame.open():((wp_media_frame=wp.media({library:{type:"image"}})).on("select",function(){var attachment=wp_media_frame.state().get("selection").first().attributes,thumbnail=void 0!==attachment.sizes&&void 0!==attachment.sizes.thumbnail?attachment.sizes.thumbnail.url:attachment.url;$preview.removeClass("hidden"),$img.attr("src",thumbnail),$input.val(attachment.id).trigger("change")}),wp_media_frame.open()))}),$remove.on("click",function(e){e.preventDefault(),$input.val("").trigger("change"),$preview.addClass("hidden")})})},$.fn.WPSF_IMAGE_GALLERY=function(){return this.each(function(){var wp_media_frame,$this=$(this),$edit=$this.find(".wpsf-edit"),$remove=$this.find(".wpsf-remove"),$list=$this.find("ul"),$input=$this.find("input");$this.find("img");$this.on("click",".wpsf-add, .wpsf-edit",function(e){var $el=$(this),ids=$input.val(),what=$el.hasClass("wpsf-edit")?"edit":"add",state="add"!==what||ids.length?"gallery-edit":"gallery";e.preventDefault(),"undefined"!=typeof wp&&wp.media&&wp.media.gallery&&("gallery"===state?(wp_media_frame=wp.media({library:{type:"image"},frame:"post",state:"gallery",multiple:!0})).open():(wp_media_frame=wp.media.gallery.edit('[gallery ids="'+ids+'"]'),"add"===what&&wp_media_frame.setState("gallery-library")),wp_media_frame.on("update",function(selection){$list.empty();var selectedIds=selection.models.map(function(attachment){var item=attachment.toJSON(),thumb=void 0!==item.sizes.thumbnail?item.sizes.thumbnail.url:item.url;return $list.append('<li><img src="'+thumb+'"></li>'),item.id});$input.val(selectedIds.join(",")).trigger("change"),$remove.removeClass("hidden"),$edit.removeClass("hidden")}))}),$remove.on("click",function(e){e.preventDefault(),$list.empty(),$input.val("").trigger("change"),$remove.addClass("hidden"),$edit.addClass("hidden")})})},$.fn.WPSF_TYPOGRAPHY=function(){return this.each(function(){var typography=$(this),family_select=typography.find(".wpsf-typo-family"),variants_select=typography.find(".wpsf-typo-variant"),typography_type=typography.find(".wpsf-typo-font");family_select.on("change",function(){var _this=$(this),_type=_this.find(":selected").data("type")||"custom",_variants=_this.find(":selected").data("variants");variants_select.length&&(variants_select.find("option").remove(),$.each(_variants.split("|"),function(key,text){variants_select.append('<option value="'+text+'">'+text+"</option>")}),variants_select.find('option[value="regular"]').prop("selected","selected").trigger("chosen:updated")),typography_type.val(_type)})})},$.fn.WPSF_GROUP=function(){return this.each(function(){var $this=$(this),$elem=$(this);$this.find("> .wpsf-fieldset").length>0&&($elem=$this.find("> .wpsf-fieldset"));var field_groups=$elem.find("> .wpsf-groups"),accordion_group=$elem.find(" > .wpsf-accordion"),clone_group=$elem.find(".wpsf-group:first").clone(),$heading=field_groups.find("> .wpsf-group > .wpsf-group-title");accordion_group.length&&accordion_group.each(function(){$(this).accordion({header:"> .wpsf-group > .wpsf-group-title",collapsible:!0,active:!1,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(event,ui){$(ui.newPanel).WPSF_DEPENDENCY("sub")}})}),field_groups.sortable({axis:"y",handle:$heading,helper:"original",cursor:"move",placeholder:"widget-placeholder",start:function(event,ui){var inside=ui.item.children(".wpsf-group-content");"block"===inside.css("display")&&(inside.hide(),field_groups.sortable("refreshPositions"))},stop:function(event,ui){ui.item.children(".wpsf-group-title").triggerHandler("focusout"),accordion_group.accordion({active:!1})}}),$elem.find("> .wpsf-add-group").on("click",function(e){e.preventDefault();var $ex_c=$(this).attr("data-count");void 0===$ex_c&&(($ex_c=$(this).parent().find("> .wpsf-groups > .wpsf-group").length)||($ex_c=-1)),$ex_c=parseInt($ex_c,10)+1;var $is_child=$(this).attr("data-child"),$db_id=$(this).attr("data-group-id");void 0===$db_id&&($db_id=""),$db_id=$db_id.replace("[_nonce]",""),clone_group.find("input, select, textarea").each(function(){if("yes"===$is_child){var $sp=this.name.split("[_nonce]"),$H="";$.each($sp,function($ec,$c){0!==$ec&&($c="[_nonce]"+($c=$c.replace(/\[(\d+)\]/,function(){return"["+$ex_c+"]"}))),$H+=$c}),this.name=$H}else this.name=this.name.replace(/\[(\d+)\]/,function(string,id){return"["+$ex_c+"]"})});var cloned=clone_group.clone().removeClass("hidden");field_groups.append(cloned),accordion_group.length&&(field_groups.accordion("refresh"),field_groups.accordion({active:cloned.index()})),field_groups.find("input, select, textarea").each(function(){this.name=this.name.replace("[_nonce]","")}),cloned.WPSF_DEPENDENCY("sub"),cloned.WPSF_RELOAD(),$(this).attr("data-count",$ex_c),$this.find(".wpsf-field-group").WPSF_GROUP(),$this.find(".wpsf-field-group .wpsf-add-group").attr("data-child","yes")}),field_groups.on("click",".wpsf-remove-group",function(e){e.preventDefault(),$(this).closest(".wpsf-group").remove()})})},$.fn.WPSF_TABS=function(){return this.each(function(){$(this).find(".wpsf-user-tabs-nav > li > a.wpsf-tab-a").on("click",function(e){e.preventDefault();var $li=$(this).parent(),panel=$li.data("panel"),$panel=$li.closest(".wpsf-user-tabs").find(".wpsf-user-tabs-panel-"+panel);$li.addClass("wpsf-user-tabs-active").siblings().removeClass("wpsf-user-tabs-active"),$panel.siblings().hide(),$panel.show()})})},$.fn.WPSF_ACCORDION=function(){return this.each(function(){$(this).find(".wpsf-accordion").accordion({header:"> .wpsf-group-title",collapsible:!0,active:!1,animate:250,heightStyle:"content",icons:{header:"dashicons dashicons-arrow-right",activeHeader:"dashicons dashicons-arrow-down"},beforeActivate:function(event,ui){$(ui.newPanel).WPSF_DEPENDENCY("sub")}})})},$.fn.WPSF_TAXONOMY=function(){return this.each(function(){var $parent=$(this).parent();if("addtag"===$parent.attr("id")){var $submit=$parent.find("#submit"),$wrap=($parent.find("#tag-name"),$parent.find(".wpsf-framework")),$clone=$wrap.find(".wpsf-element").clone(),$list=$("#the-list"),flooding=!1;$submit.on("click",function(){flooding||$list.on("DOMNodeInserted",function(){flooding&&($wrap.empty(),$wrap.html($clone),$clone=$clone.clone(),$wrap.WPSF_RELOAD(),$wrap.WPSF_DEPENDENCY(),flooding=!1)}),flooding=!0})}})},$.fn.WPSF_WPLINKS=function(){return this.each(function(){$(this).on("click",function(e){e.preventDefault();var $this=$(this),$parent=$this.parent(),$textarea=$parent.find("#sample_wplinks"),$link_submit=$("#wp-link-submit"),$wpsf_link_submit=$('<input type="submit" name="wpsf-link-submit" id="wpsf_link-submit" class="button-primary" value="'+$link_submit.val()+'">');$link_submit.hide(),$wpsf_link_submit.insertBefore($link_submit);var $dialog=!window.wpLink&&$.fn.wpdialog&&$("#wp-link").length?{$link:!1,open:function(){this.$link=$("#wp-link").wpdialog({title:wpLinkL10n.title,width:480,height:"auto",modal:!0,dialogClass:"wp-dialog",zIndex:3e5})},close:function(){this.$link.wpdialog("close")}}:window.wpLink;$dialog.open($textarea.attr("id")),$wpsf_link_submit.unbind("click.wpsf-wpLink").bind("click.wpsf-wpLink",function(e){e.preventDefault(),e.stopImmediatePropagation();var $url=$("#wp-link-url").length?$("#wp-link-url").val():$("#url-field").val(),$title=$("#wp-link-text").length?$("#wp-link-text").val():$("#link-title-field").val(),$target=$($("#wp-link-target").length?"#wp-link-target":"#link-target-checkbox")[0].checked?" _blank":"";$parent.find("span.link-title-value").html($title),$parent.find("span.url-value").html($url),$parent.find("span.target-value").html($target),$parent.find("input.wpsf-url").val($url),$parent.find("input.wpsf-title").val($title),$parent.find("input.wpsf-target").val($target),$dialog.close(),$link_submit.show(),$wpsf_link_submit.unbind("click.wpsf-wpLink"),$wpsf_link_submit.remove(),$("#wp-link-cancel").unbind("click.wpsf-wpLink"),window.wpLink.textarea="",$this.trigger("wpsf-links-updated")}),$("#wp-link-cancel").unbind("click.wpsf-wpLink").bind("click.wpsf-wpLink",function(e){e.preventDefault(),$dialog.close(),$wpsf_link_submit.unbind("click.wpsf-wpLink"),$wpsf_link_submit.remove(),$("#wp-link-cancel").unbind("click.wpsf-wpLink"),window.wpLink.textarea="",$this.trigger("wpsf-links-updated")})})})},$.fn.WPSF_COLOR_PICKER=function(){return this.each(function(){var $this=$(this),$wpsf_body=$("body");if(!1!==$this.data("rgba")){var picker=$.WPSF_HELPER.COLOR_PICKER.parse($this.val());$this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(event,ui){var ui_color_value=ui.color.toString();$this.closest(".wp-picker-container").find(".wpsf-alpha-slider-offset").css("background-color",ui_color_value),$this.val(ui_color_value).trigger("change")},create:function(){var a8cIris=$this.data("a8cIris"),$container=$this.closest(".wp-picker-container"),$alpha_wrap=$('<div class="wpsf-alpha-wrap"><div class="wpsf-alpha-slider"></div><div class="wpsf-alpha-slider-offset"></div><div class="wpsf-alpha-text"></div></div>').appendTo($container.find(".wp-picker-holder")),$alpha_slider=$alpha_wrap.find(".wpsf-alpha-slider"),$alpha_text=$alpha_wrap.find(".wpsf-alpha-text"),$alpha_offset=$alpha_wrap.find(".wpsf-alpha-slider-offset");$alpha_slider.slider({slide:function(event,ui){var slide_value=parseFloat(ui.value/100);a8cIris._color._alpha=slide_value,$this.wpColorPicker("color",a8cIris._color.toString()),$alpha_text.text(slide_value<1?slide_value:"")},create:function(){var slide_value=parseFloat(picker.alpha/100),alpha_text_value=slide_value<1?slide_value:"";$alpha_text.text(alpha_text_value),$alpha_offset.css("background-color",picker.value),$container.on("click",".wp-picker-clear",function(){a8cIris._color._alpha=1,$alpha_text.text("").trigger("change"),$alpha_slider.slider("option","value",100).trigger("slide")}),$container.on("click",".wp-picker-default",function(){var default_picker=$.WPSF_HELPER.COLOR_PICKER.parse($this.data("default-color")),default_value=parseFloat(default_picker.alpha/100),default_text=default_value<1?default_value:"";a8cIris._color._alpha=default_value,$alpha_text.text(default_text),$alpha_slider.slider("option","value",default_picker.alpha).trigger("slide")}),$container.on("click",".wp-color-result",function(){$alpha_wrap.toggle()}),$wpsf_body.on("click.wpcolorpicker",function(){$alpha_wrap.hide()})},value:picker.alpha,step:1,min:1,max:100})}})}else $this.wpColorPicker({clear:function(){$this.trigger("keyup")},change:function(even,ui){$this.val(ui.color.toString()).trigger("change")}})})},$.fn.WPSF_CSS_BUILDER=function(){return this.each(function(){var $this=$(this);$this.find(".wpsf-css-checkall").on("click",function(){$(this).toggleClass("checked")}),$this.find(".wpsf-element.wpsf-margin :input").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.all($(this),"margin",$this)}),$this.find(".wpsf-element.wpsf-padding :input").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.all($(this),"padding",$this)}),$this.find(".wpsf-element.wpsf-border :input").on("change, blur",function(){$.WPSF_HELPER.CSS_BUILDER.update.all($(this),"border",$this)}),$this.find(".wpsf-element.wpsf-border-radius :input").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.all($(this),"border-radius",$this)}),$this.find(".wpsf-element-border-style select").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.border($this)}),$this.find(".wpsf-element-border-color input.wpsf-field-color-picker").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.border($this)}),$this.find(".wpsf-element-text-color input.wpsf-field-color-picker").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.border($this)}),$this.find(".wpsf-element-background-color input.wpsf-field-color-picker").on("change",function(){$.WPSF_HELPER.CSS_BUILDER.update.border($this)})})},$.fn.WPSF_LIMITER=function(){return this.each(function(){var $this=$(this),$limiter=$this.parent().find("> .text-limiter"),$counter=$limiter.find("span.counter"),$limit=parseInt($limiter.find("span.maximum").html()),$countByWord="word"==$limiter.data("limit-type"),$val=$.WPSF_HELPER.LIMITER.counter($this.val(),$countByWord);$counter.html($val),$this.on("input",function(){var text=$this.val(),length=$.WPSF_HELPER.LIMITER.counter(text,$countByWord);length>$limit?(text=$.WPSF_HELPER.LIMITER.subStr(text,0,$limit,$countByWord),$this.val(text),$counter.html($limit)):$counter.html(length)})})},$.fn.WPSF_FONT_CONTAINER=function(){return this.each(function(){var $this=$(this);$.WPSF_HELPER.FONT_CONTAINER.update($this),$this.find(":input").on("change",function(){$.WPSF_HELPER.FONT_CONTAINER.update($this)})})},$.fn.WPSF_TOOLTIP=function(){return this.each(function(){$(this).tooltip({html:!0,container:"body"})})},$.fn.WPSF_ANIMATE_CSS=function(){return this.each(function(){var $parent=$(this);$parent.find("select").on("change",function(){var $val=$(this).val(),$h3=$parent.find(".animation-preview h3");$h3.removeClass(),$h3.addClass($val+" animated ").one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){$(this).removeClass()})})})},$.fn.WPSF_DATE_PICKER=function(){return this.each(function(){var $input=$(this).find("input.wpsf-datepicker"),$INPUTID=$input.data("datepicker-id"),$settings={};"object"==typeof window[$INPUTID]&&($settings=window[$INPUTID]),$settings=$.WPSF_HELPER.ELM_ARGS_TYPE($settings),$input.flatpickr($settings)})},$.fn.WPSF_MODEL_SEARCH=function(){return this.each(function(){var $this=$(this),$value={};""!==$(this).find(".modal_search_value textarea").html()?$value=JSON.parse($(this).find(".modal_search_value textarea").html()):$(this).find(".modal_search_value textarea").html(JSON.stringify($value)),$.WPSF_HELPER.MODEL_SEARCH_RESUT($(this),$value),$(this).find(".wpsf-modal-search-button").on("click",function(e){new WPSF_Modal_Search({el:"#wpsf-modal-search-view-"+$(this).data("id"),modal_id:$(this).data("id"),selector:"#wpsf-modal-search-view-"+$(this).data("id"),parentElem:$this}).trigger("open")})})},$.fn.WPSF_TAB_NAVIGATION=function(){return this.each(function(){var wpsf_theme=$(this).attr("data-theme"),is_single_page=$(this).attr("data-single-page");"modern"==wpsf_theme?$.WPSF_HELPER.NAV_BAR.modern($(this),is_single_page):$.WPSF_HELPER.NAV_BAR.simple($(this),is_single_page)})},$.fn.WPSF_DEPENDENCY=function(param){return this.each(function(){new $.WPSF_DEPENDENCY(this,param)})},$.fn.WPSF_STICKY_HEADER=function(){return this.each(function(){var header=$(this);header.offset().top;$(this).hasClass("wpsf-sticky-header")&&$(window).on("scroll.wpsfStickyHeader",function(){$(this).scrollTop()>1?header.addClass("sticky").css("width",$(".wpsf-body").width()):header.removeClass("sticky").css("width","auto")})})},$.fn.WPSF_RESET_CONFIRM=function(){return this.each(function(){$(this).on("click",function(e){confirm("Are you sure?")||e.preventDefault()})})},$.fn.WPSF_SAVE=function(){return this.each(function(){var $this=$(this),$text=$this.data("save"),$value=$this.val(),$ajax=$("#wpsf-save-ajax");$(document).on("keydown",function(event){(event.ctrlKey||event.metaKey)&&"s"===String.fromCharCode(event.which).toLowerCase()&&(event.preventDefault(),$this.trigger("click"))}),$this.on("click",function(e){if($ajax.length){"object"==typeof tinyMCE&&tinyMCE.triggerSave(),$this.prop("disabled",!0).attr("value",$text);var serializedOptions=$(".wpsf-form").serialize();$.post("options.php",serializedOptions).error(function(){alert("Error, Please try again.")}).success(function(){$this.prop("disabled",!1).attr("value",$value),$ajax.hide().fadeIn().delay(250).fadeOut()}),e.preventDefault()}else $this.addClass("disabled").attr("value",$text)})})},$.fn.WPSF_RELOAD=function(){return this.each(function(){$.WPSF.reload_fields($(this))})},$.WPSF={body:$("body"),is_in_popup:!1,icons_manager:function(){var $parent,base=this,onload=!0,$wpsf_body=$("body");base.init=function(){$wpsf_body.on("click",".wpsf-icon-add",function(e){e.preventDefault();var $this=$(this),$dialog=$("#wpsf-icon-dialog"),$load=$dialog.find(".wpsf-dialog-load"),$search=($dialog.find(".wpsf-dialog-select"),$dialog.find(".wpsf-dialog-insert"),$dialog.find(".wpsf-icon-search"));$parent=$this.closest(".wpsf-icon-select"),$dialog.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){$wpsf_body.addClass("wpsf-icon-scrolling"),$(".ui-dialog-titlebar-close").addClass("ui-button"),$(window).on("resize",function(){var height=$(window).height(),load_height=Math.floor(height-237),set_height=Math.floor(height-125);$dialog.dialog("option","height",set_height).parent().css("max-height",set_height),$dialog.css("overflow","auto"),$load.css("height",load_height)}).resize()},close:function(){$wpsf_body.removeClass("wpsf-icon-scrolling")}}),onload&&$.ajax({type:"POST",url:ajaxurl,data:{action:"wpsf-ajax","wpsf-action":"wpsf-get-icons"},success:function(content){$load.html(content),onload=!1,$load.on("click","a",function(e){e.preventDefault();var icon=$(this).data("wpsf-icon");$parent.find("i").removeAttr("class").addClass(icon),$parent.find("input").val(icon).trigger("change"),$parent.find(".wpsf-icon-preview").removeClass("hidden"),$parent.find(".wpsf-icon-remove").removeClass("hidden"),$dialog.dialog("close")}),$search.keyup(function(){var value=$(this).val();$load.find("a").each(function(){var $ico=$(this);$ico.data("wpsf-icon").search(new RegExp(value,"i"))<0?$ico.hide():$ico.show()})}),$load.find(".wpsf-icon-tooltip").tooltip({html:!0,placement:"top",container:"body"})}})}),$wpsf_body.on("click",".wpsf-icon-remove",function(e){e.preventDefault();var $this=$(this),$parent=$this.closest(".wpsf-icon-select");$parent.find(".wpsf-icon-preview").addClass("hidden"),$parent.find("input").val("").trigger("change"),$this.addClass("hidden")})},base.init()},shortcode_manager:function(){var deploy_atts,base=this,$wpsf_body=$("body");base.init=function(){var shortcode_name,shortcode_view,shortcode_clone,$shortcode_button,editor_id,$dialog=$("#wpsf-shortcode-dialog"),$insert=$dialog.find(".wpsf-dialog-insert"),$shortcodeload=$dialog.find(".wpsf-dialog-load"),$selector=$dialog.find(".wpsf-dialog-select"),shortcode_target=!1;$wpsf_body.on("click",".wpsf-shortcode",function(e){e.preventDefault(),$selector.WPSF_CHOSEN(),$shortcode_button=$(this),shortcode_target=$shortcode_button.hasClass("wpsf-shortcode-textarea"),editor_id=$shortcode_button.data("editor-id"),$dialog.dialog({width:850,height:700,modal:!0,resizable:!1,closeOnEscape:!0,position:{my:"center",at:"center",of:window},open:function(){$wpsf_body.addClass("wpsf-shortcode-scrolling"),$(".ui-dialog-titlebar-close").addClass("ui-button"),$(window).on("resize",function(){var height=$(window).height(),load_height=Math.floor(height-281),set_height=Math.floor(height-125);$dialog.dialog("option","height",set_height).parent().css("max-height",set_height),$dialog.css("overflow","auto"),$shortcodeload.css("height",load_height)}).resize(),$selector.find("option").length<=2&&($selector.find("option").not(":empty()").first().attr("selected",!0),$selector.trigger("change"))},close:function(){shortcode_target=!1,$wpsf_body.removeClass("wpsf-shortcode-scrolling")}})}),$selector.on("change",function(){var $elem_this=$(this);shortcode_name=$elem_this.val(),shortcode_view=$elem_this.find(":selected").data("view"),shortcode_name.length?$.ajax({type:"POST",url:ajaxurl,data:{action:"wpsf-get-shortcode",shortcode:shortcode_name},success:function(content){$.WPSF.is_in_popup=!0,$shortcodeload.html(content),$insert.parent().removeClass("hidden"),shortcode_clone=$(".wpsf-shortcode-clone",$dialog).clone(),$shortcodeload.WPSF_DEPENDENCY(),$shortcodeload.WPSF_DEPENDENCY("sub"),$shortcodeload.WPSF_RELOAD(),$.WPSF.is_in_popup=!1}}):($insert.parent().addClass("hidden"),$shortcodeload.html(""))}),$insert.on("click",function(e){e.preventDefault();var send_to_shortcode="";switch(shortcode_view){case"contents":$("[data-atts]",".wpsf-dialog-load").each(function(){var _this=$(this),_atts=_this.data("atts");send_to_shortcode+="["+_atts+"]",send_to_shortcode+=_this.val(),send_to_shortcode+="[/"+_atts+"]"});break;case"clone":send_to_shortcode+="["+shortcode_name,$("[data-atts]",".wpsf-dialog-load .wpsf-element:not(.hidden)").each(function(){var _this_main=$(this),_this_main_atts=_this_main.data("atts");send_to_shortcode+=base.validate_atts(_this_main_atts,_this_main)}),send_to_shortcode+="]",$("[data-clone-id]",".wpsf-dialog-load").each(function(){var _this_clone=$(this),_clone_id=_this_clone.data("clone-id");send_to_shortcode+="["+_clone_id,$("[data-clone-atts]",_this_clone.find(".wpsf-element").not(".hidden")).each(function(){var _this_multiple=$(this),_atts_multiple=_this_multiple.data("clone-atts");"content"!==_atts_multiple?send_to_shortcode+=base.validate_atts(_atts_multiple,_this_multiple):"content"===_atts_multiple&&(send_to_shortcode+="]",send_to_shortcode+=_this_multiple.val(),send_to_shortcode+="[/"+_clone_id)}),send_to_shortcode+="]"}),send_to_shortcode+="[/"+shortcode_name+"]";break;case"clone_duplicate":$("[data-clone-id]",".wpsf-dialog-load").each(function(){var _this_clone=$(this),_clone_id=_this_clone.data("clone-id");send_to_shortcode+="["+_clone_id,$("[data-clone-atts]",_this_clone.find(".wpsf-element").not(".hidden")).each(function(){var _this_multiple=$(this),_atts_multiple=_this_multiple.data("clone-atts");"content"!==_atts_multiple?send_to_shortcode+=base.validate_atts(_atts_multiple,_this_multiple):"content"===_atts_multiple&&(send_to_shortcode+="]",send_to_shortcode+=_this_multiple.val(),send_to_shortcode+="[/"+_clone_id)}),send_to_shortcode+="]"});break;default:send_to_shortcode+="["+shortcode_name,$("[data-atts]",".wpsf-dialog-load .wpsf-element:not(.hidden)").each(function(){var _this=$(this),_atts=_this.data("atts");"content"!==_atts?send_to_shortcode+=base.validate_atts(_atts,_this):"content"===_atts&&(send_to_shortcode+="]",send_to_shortcode+=_this.val(),send_to_shortcode+="[/"+shortcode_name)}),send_to_shortcode+="]"}if(shortcode_target){var $textarea=$shortcode_button.next();$textarea.val(base.insertAtChars($textarea,send_to_shortcode)).trigger("change")}else base.send_to_editor(send_to_shortcode,editor_id);deploy_atts=null,$dialog.dialog("close")});var cloned=0;$dialog.on("click","#shortcode-clone-button",function(e){$.WPSF.is_in_popup=!0,e.preventDefault();var cloned_el=shortcode_clone.clone().hide();cloned_el.find("input:radio").attr("name","_nonce_"+cloned),$(".wpsf-shortcode-clone:last").after(cloned_el),cloned_el.slideDown(100),cloned_el.find(".wpsf-remove-clone").show().on("click",function(e){cloned_el.slideUp(100,function(){cloned_el.remove()}),e.preventDefault()}),cloned_el.WPSF_DEPENDENCY("sub"),cloned_el.WPSF_RELOAD(),$.WPSF.is_in_popup=!1,cloned++})},base.validate_atts=function(_atts,_this){var el_value;return void 0!==_this.data("check")&&deploy_atts===_atts?"":(deploy_atts=_atts,!0===_this.closest(".pseudo-field").hasClass("hidden")?"":!0===_this.hasClass("pseudo")?"":(el_value=_this.is(":checkbox")||_this.is(":radio")?_this.is(":checked")?_this.val():"":_this.val(),void 0!==_this.data("check")&&(el_value=_this.closest(".wpsf-element").find("input:checked").map(function(){return $(this).val()}).get()),null!==el_value&&void 0!==el_value&&""!==el_value&&0!==el_value.length?" "+_atts+'="'+el_value+'"':""))},base.insertAtChars=function(_this,currentValue){var obj=void 0!==_this[0].name?_this[0]:_this;return obj.value.length&&void 0!==obj.selectionStart?(obj.focus(),obj.value.substring(0,obj.selectionStart)+currentValue+obj.value.substring(obj.selectionEnd,obj.value.length)):(obj.focus(),currentValue)},base.send_to_editor=function(html,editor_id){var tinymce_editor;if("undefined"!=typeof tinymce&&(tinymce_editor=tinymce.get(editor_id)),tinymce_editor&&!tinymce_editor.isHidden())tinymce_editor.execCommand("mceInsertContent",!1,html);else{var $editor=$("#"+editor_id);$editor.val(base.insertAtChars($editor,html)).trigger("change")}},base.init()},reload_fields:function($this){$(".chosen",$this).WPSF_CHOSEN(),$(".select2",$this).WPSF_SELECT2(),$(".wpsf-field-image-select",$this).WPSF_IMAGE_SELECT(),$(".wpsf-field-sorter",$this).WPSF_SORTER(),$(".wpsf-field-upload",$this).WPSF_UPLOADER(),$(".wpsf-field-image",$this).WPSF_IMAGE_UPLOADER(),$(".wpsf-field-gallery",$this).WPSF_IMAGE_GALLERY(),$(".wpsf-field-tab",$this).WPSF_TABS(),$(".wpsf-field-accordion",$this).WPSF_ACCORDION(),$(".wpsf-wp-link",$this).WPSF_WPLINKS(),$(".wpsf-field-color-picker",$this).WPSF_COLOR_PICKER(),$(".wpsf-field-css_builder",$this).WPSF_CSS_BUILDER(),$('input[data-limit-element="1"],textarea[data-limit-element="1"]',$this).WPSF_LIMITER(),$(".wpsf-field-font_container",$this).WPSF_FONT_CONTAINER(),$(".wpsf-field-typography",$this).WPSF_TYPOGRAPHY(),$(".wpsf-help",$this).WPSF_TOOLTIP(),$(".wpsf-field-animate_css",$this).WPSF_ANIMATE_CSS(),$('[data-toggle="wpsftooltip"]').WPSF_TOOLTIP(),$(".wpsf-field-date_picker",$this).WPSF_DATE_PICKER(),$(".wpsf-field-model_search",$this).WPSF_MODEL_SEARCH()},widget_reload:function(){$(document).on("widget-added widget-updated",function(event,$widget){$widget.WPSF_RELOAD(),$widget.WPSF_DEPENDENCY()})},fixes:{popup:function(){void 0!==$.widget&&void 0!==$.ui&&void 0!==$.ui.dialog&&$.widget("ui.dialog",$.ui.dialog,{_createOverlay:function(){this._super(),this.options.modal&&this._on(this.overlay,{click:"close"})}})},colorpicker:function(){"function"==typeof Color&&(Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;i>=0;i--)hex="0"+hex;return"#"+hex})}}},$.WPSF.fixes.popup(),$.WPSF.fixes.colorpicker(),$(window).on("load",function(){$(".wpsf-wc-metabox-fields").length>0&&($(".wpsf-wc-metabox-fields").WPSF_RELOAD(),$("#woocommerce-product-data").on("woocommerce_variations_loaded",function(){$(".wpsf-wc-metabox-fields").WPSF_RELOAD()}))}),$(document).ready(function(){$.WPSF.icons_manager(),$.WPSF.shortcode_manager(),$.WPSF.widget_reload(),$(".wpsf-framework").WPSF_TAB_NAVIGATION(),$(".wpsf-content, .wp-customizer, .widget-content, .wpsf-taxonomy , .wpsf-wc-metabox-fields").WPSF_DEPENDENCY(),$(".wpsf-framework, #widgets-right").WPSF_RELOAD(),$(".wpsf-taxonomy").WPSF_TAXONOMY(),$(".wpsf-field-group").WPSF_GROUP(),$(".wpsf-header").WPSF_STICKY_HEADER(),$(".wpsf-reset-confirm, .wpsf-import-backup").WPSF_RESET_CONFIRM(),$(".wpsf-save").WPSF_SAVE()})}(jQuery,window,document,wp.hooks);